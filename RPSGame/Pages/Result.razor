@page "/result"

@using Services
@inject GameService _gameService
@inject NavigationManager _navManager

    <div class="container">
        <div class="row">
            <div class="col-4">
                @if (this._gameService.PlayerChoice == Services.Choices.Rock)
                {
                    <img width="100%" height="80%" src="img/rock_human.png" />
                }
                @if (this._gameService.PlayerChoice == Services.Choices.Papper)
                {
                    <img width="100%" height="80%" src="img/paper_human.png" />
                }
                @if (this._gameService.PlayerChoice == Services.Choices.Scissors)
                {
                    <img width="100%" height="80%" src="img/scissors_human.png" />
                }
            </div>
            <div class="col-4">
                <div class="d-flex justify-content-center">
                    @if (this._gameService.Winner is Services.Winners.Player)
                    {
                        <h3>@this._gameService.Name won this round</h3>
                    }
                    @if (this._gameService.Winner is Services.Winners.Robot)
                    {
                        <h3>Robot won this round</h3>
                    }
                    @if (this._gameService.Winner is Services.Winners.Draw)
                    {
                        <h3>Draw</h3>
                    }
                </div>
                <div class="d-flex justify-content-center">
                    <a @onclick="NewRound" class="btn btn-primary">Next Round</a>
                </div>
            </div>
            <div class="col-4">
                @if (this._gameService.RobotChoice == Services.Choices.Rock)
                {
                    <img width="100%" height="80%" src="img/rock_robot.png" />
                }
                @if (this._gameService.RobotChoice == Services.Choices.Papper)
                {
                    <img width="100%" height="80%" src="img/paper_robot.png" />
                }
                @if (this._gameService.RobotChoice == Services.Choices.Scissors)
                {
                    <img width="100%" height="80%" src="img/scissors_robot.png" />
                }
            </div>
        </div>
    </div>

    @code {

        private void NewRound() => this._navManager.NavigateTo("/playerchoice");

        protected override void OnInitialized()
        {
            this._gameService.SetRobotChoice();
            this._gameService.SetWinner();
        }
    }
